CREATE DATABASE siatechmx;

CREATE TABLE tipo_usuario (
  id_tipo_usuario  INTEGER NOT NULL AUTO_INCREMENT,
  descripcion VARCHAR(30) NOT NULL,
  PRIMARY KEY (id_tipo_usuario)
);

CREATE TABLE usuario (
	id_usuario INTEGER NOT NULL AUTO_INCREMENT,
    nombre_usuario VARCHAR(15) NOT NULL,
    contra_usuario VARCHAR(20) NOT NULL,
    id_tipo_usuario INTEGER NOT NULL,
    PRIMARY KEY (id_usuario),
    FOREIGN KEY (id_tipo_usuario) REFERENCES tipo_usuario(id_tipo_usuario)
);

CREATE TABLE rol_empleado (
	id_rol_empleado INTEGER NOT NULL AUTO_INCREMENT,
    descripcion VARCHAR(50) NOT NULL,
    activo BOOLEAN NOT NULL,
    PRIMARY KEY (id_rol_empleado)
);

CREATE TABLE empleado (
	id_empleado INTEGER NOT NULL AUTO_INCREMENT,
    nombre VARCHAR(30) NOT NULL,
    apellido_paterno VARCHAR(30) NOT NULL,
    apellido_materno VARCHAR(30) NOT NULL,
    rfc VARCHAR(13) NOT NULL,
    curp VARCHAR(18) NOT NULL,
    telefono VARCHAR(15) NOT NULL,
    correo VARCHAR(75) NOT NULL,
    fecha_ingreso DATE NOT NULL,
    activo BOOLEAN NOT NULL,
    id_rol_empleado INTEGER NOT NULL,
    id_usuario INTEGER NOT NULL,
    PRIMARY KEY (id_empleado),
    FOREIGN KEY (id_rol_empleado) REFERENCES rol_empleado(id_rol_empleado),
    FOREIGN KEY (id_usuario) REFERENCES usuario(id_usuario)
);

CREATE TABLE servicio (
	id_servicio INTEGER NOT NULL AUTO_INCREMENT,
    nombre_servicio VARCHAR(75) NOT NULL,
    descripcion VARCHAR(250) NOT NULL,
    PRIMARY KEY (id_servicio)
);

CREATE TABLE estatus_contacto(
	id_estatus INTEGER NOT NULL AUTO_INCREMENT,
    descripcion VARCHAR(50),
    PRIMARY KEY (id_estatus)
);

CREATE TABLE entrada_contacto (
	id_entrada_contacto INTEGER NOT NULL AUTO_INCREMENT,
    nombre_cliente VARCHAR(80) NOT NULL,
    correo VARCHAR(75) NOT NULL,
    telefono VARCHAR(15) NOT NULL,
    mensaje TEXT,
    id_tipo_servicio INTEGER NOT NULL,
    id_estatus INTEGER NOT NULL,
    id_empleado INTEGER NOT NULL,
    PRIMARY KEY (id_entrada_contacto),
    FOREIGN KEY(id_tipo_servicio) REFERENCES servicio(id_servicio),
    FOREIGN KEY(id_estatus) REFERENCES estatus_contacto(id_estatus),
    FOREIGN KEY(id_empleado) REFERENCES empleado(id_empleado)
);

CREATE TABLE domicilio (
	id_domicilio INTEGER NOT NULL AUTO_INCREMENT,
    calle VARCHAR(70) NOT NULL,
    numero_exterior VARCHAR(30),
    numero_interior VARCHAR(30),
    ciudad VARCHAR(70) NOT NULL,
    municipio VARCHAR(70) NOT NULL,
    estado VARCHAR(70) NOT NULL,
    codigo_postal INTEGER NOT NULL,
    id_empleado INTEGER NOT NULL,
    PRIMARY KEY(id_domicilio),
    FOREIGN KEY(id_empleado) REFERENCES empleado(id_empleado)
);



/*INSERT*/
INSERT INTO tipo_usuario (descripcion) VALUES('Administrador'),('Empleado'),('Pruebas');
INSERT INTO rol_empleado (descripcion, activo) VALUES('Desarrollador BackEnd', true), ('Desarrollador FrontEnd', true), ('Desarrollador Full Stack', true), ('Ingeniero de servicios', true);
INSERT INTO servicio (nombre_servicio, descripcion) VALUES('Desarrollo y mantenimiento de sitios', 'Desarrollos de sistemas, sitios, aplicación móvil y de Voz.'),('Arrendamiento de equipos', 'Herramienta estratégica para el desarrollo, modernización y competitividad de las empresas.'),
('Impresoras / Consumibles', 'Alquiler y venta de impresoras y consumibles'), ('Instalación de cámaras', 'Servicio de instalación');
INSERT INTO estatus_contacto (descripcion) VALUES ('Pendiente'), ('Revisado'), ('Aceptado'), ('Rechazado');